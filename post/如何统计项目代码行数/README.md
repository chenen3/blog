## 如何统计项目代码行数
今天被问到如何统计项目代码行数，我说用 grep -c ，卒… grep -c 是统计命中关键字的行数，与统计项目代码行数是不一样的。

### 使用系统自带的命令  find+wc
执行 `find [path] -name '*.go'|xargs wc -l|tail -n1`，就能统计目录内的go文件代码行数，如需其他文件类型则更改文件名后缀即可。思路如下：
1. find找到相关文件
2. xargs把上一步输出的文件名分别传给下一步
3. wc统计各个文件行数并打印
4. tail截取最后一行作为总体输出
```shell
$ find algo -name '*.go'|xargs wc -l|tail -n1
   11561 total
```
### 借助第三方工具cloc
执行`cloc [path]` (需要事先安装，例如Ubuntu系统就执行 `sudo apt-get install cloc`)，能自动把注释行也识别出来，这点比较贴心
```
$ cloc algo
     195 text files.
     195 unique files.
       3 files ignored.

github.com/AlDanial/cloc v 1.70  T=0.65 s (295.4 files/s, 18217.5 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Go                             186           1033           1225           9303
XML                              7              0              0            340
-------------------------------------------------------------------------------
SUM:                           193           1033           1225           9643
-------------------------------------------------------------------------------
```

### 相关扩展
看今天自己写了多少行代码，到代码仓库目录：
```sh
$ git log --pretty=%h --author=chenen --since=1.day|xargs git show|grep -ce '^\+[^\+]'
1
```
思路如下：
1. `git log` 指定格式**只输出commitID**，作者和日期范围按需修改即可。例如最近一天`--since=1.day`, 最近一周`--since=1.week`
2. xargs 把上一步的输出传递给下一个命令
3. `git show` 打印每一次提交的代码改动
4. `grep -ce`匹配一个加号开头的行，打印行数。注意排除多个加号开头的行，因为多个加号开头的行是改动的文件名。这里可能因为git的版本更新有所不同，注意按需修改匹配规则

### 总结
虽然我平时在开发机器上会用cloc，图个省心，但是最好也熟练使用自带命令组合的方法。毕竟在生产环境是不方便随便安装软件的，只好用系统内建的命令来组合使用。
